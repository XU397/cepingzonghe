# 🚀 快速开始：Mock 模式

## 1️⃣ 确认配置（1 分钟）

检查 `.env` 文件是否包含：

```bash
VITE_USE_MOCK=1
```

如果没有，添加此行并保存。

---

## 2️⃣ 启动开发服务器

```bash
npm run dev
```

**成功标志**：看到以下输出表示 Mock 模式已启用

```
🔧 ==================== Vite 配置 ====================
📦 运行模式: development
🎭 Mock 模式: ✅ 启用（前端独立调试）
🌐 后端地址: N/A (使用 Mock)
====================================================
```

---

## 3️⃣ 测试完整流程

### 步骤 1：登录

访问：http://localhost:3000

随便输入账号密码，点击登录。

**预期**：自动跳转到 `/flow/test-flow-1`

### 步骤 2：答题

点击"继续"按钮开始答题。

**预期**：
- ✅ 页面正常跳转
- ✅ 服务器控制台显示：`🎭 [Mock API] ✅ 拦截数据提交: /stu/saveHcMark`
- ✅ **不再提示"提交页面数据失败"**

### 步骤 3：验证数据提交

每次点击"下一页"，服务器控制台应显示：

```
🎭 [Mock API] ✅ 拦截数据提交: /stu/saveHcMark
   📦 请求方法: POST
   ✨ 返回 Mock 成功响应
```

---

## 4️⃣ 切换到联调模式（可选）

需要对接真实后端时：

1. 修改 `.env`：
   ```bash
   VITE_USE_MOCK=0
   ```

2. 重启开发服务器：
   ```bash
   # Ctrl+C 停止，然后
   npm run dev
   ```

3. 确认输出：
   ```
   🎭 Mock 模式: ❌ 禁用（真实后端联调）
   🌐 后端地址: http://117.72.14.166:9002
   ```

---

## ❓ 遇到问题？

### 问题：仍然提示"提交失败"

**检查清单**：
1. ✅ `.env` 文件中 `VITE_USE_MOCK=1`
2. ✅ 重启了开发服务器
3. ✅ 启动日志显示 `Mock 模式: ✅ 启用`
4. ✅ 浏览器刷新页面（清除旧的服务器连接）

### 问题：修改 `.env` 后没生效

**原因**：环境变量只在服务器启动时加载。

**解决**：必须重启开发服务器。

### 问题：想查看 Mock 数据

**位置**：
- 登录响应：`vite.config.js:112-126`
- 提交响应：`vite.config.js:129-136`
- Flow 定义：`src/flows/orchestrator/mockFlowDefinitions.js`

---

## 📚 更多文档

详细说明请查看：[MOCK_MODE_GUIDE.md](./MOCK_MODE_GUIDE.md)
