# **2.0 需求 (Requirements)**

### **2.1 功能需求 (Functional Requirements)**

* **FR1**: 应用必须支持一个多模块架构，允许不同的测评模块（如“蒸馒头”和“火车购票”）独立运行。  
* **FR2**: 系统必须实现一个顶层的模块路由器 (ModuleRouter.jsx)。该路由器需能根据用户登录后API返回的 url 字段，自动将用户导航至正确的测评模块。  
* **FR3**: 必须根据《Web端人机交互测评需求文档》的详细规格，完整地实现一个全新的、功能独立的“火车购票”测评模块。  
* **FR4**: “火车购票”模块必须包含一个全局的、从40分钟开始的倒计时器。当计时结束时，系统必须能自动提交用户的作答数据。  
* **FR5**: “火车购票”模块必须强制实现一个单向、不可逆的页面流程。用户完成一页并点击“下一页”后，应禁止其通过任何方式（包括浏览器后退按钮）返回上一页。  
* **FR6**: 在“火车购票”模块的时间规划任务（题目 7 & 8）中，必须实现一个拖拽式的交互界面。该界面计算“总用时”的逻辑，必须基于任务排列的**关键路径**，而非简单的时长累加。  
* **FR7**: 在“火车购票”模块的票价计算任务（题目 10）中，必须实现一个自定义的屏幕小键盘，用于分别捕获用户的计算公式和最终结果。  
* **FR8**: 所有模块（包括新的“火车购票”模块）上报用户数据时，都必须严格遵守既有的数据标准：通过 POST 请求将 FormData 发送至 /stu/saveHcMark 端点，且 mark 字段的内容必须是符合规范的 markObject JSON字符串。

### **2.2 非功能需求 (Non-Functional Requirements)**

* **NFR1**: 在测评进行期间，应用界面必须维持一个固定的布局框架，该框架包含一个主内容区、一个左侧导航栏和一个全局计时器显示区。  
* **NFR2**: 左侧导航栏必须能够根据用户当前所处的测评逻辑阶段，动态地高亮对应的导航项。  
* **NFR3**: 所有为新模块开发的UI组件（如按钮、输入框、自定义键盘等），在设计时应考虑到未来的可复用性，以便能逐步迁移到共享组件库 src/shared/components/ 中。  
* **NFR4**: 应用必须能够优雅地处理会话过期的情况（例如，当API返回401错误时），应能引导用户重新登录，并尽可能地保留其未提交的作答进度。

### **2.3 兼容性需求 (Compatibility Requirements)**

* **CR1**: **（核心约束）** 现有的七年级“蒸馒头”模块必须保持其功能的完整性和稳定性，其内部所有文件**绝不能**进行任何代码修改。它将通过一个包装器 (wrapper.js) 的方式被集成到新的模块化系统中。  
* **CR2**: 所有与后端交互的API端点和数据格式（特别是 FormData 和 markObject 结构）必须保持与现有实现完全一致，以确保后端的向后兼容性。  
* **CR3**: 新模块系统的引入，不得对现有“蒸馒头”模块的性能（如加载速度、交互响应）或用户体验产生任何负面影响。  
* **CR4**: 必须保留并复用现有的用户认证流程及密码加密机制 (jsencrypt.ts)，仅在其基础上扩展，以支持新模块的路由选择逻辑。
