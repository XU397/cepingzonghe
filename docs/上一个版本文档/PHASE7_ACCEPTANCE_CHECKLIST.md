# Grade 7 Tracking Module 验收检查清单

**模块**: Grade 7 Tracking Module
**版本**: 1.0.0
**测试日期**: 2025-10-15
**测试人员**: Claude AI Agent

---

## 1. 功能完整性检查

### 1.1 页面完整性 (23个页面)

#### 过渡页面 (2页)
- [ ] **Page01_Notice** - 注意事项页面
  - 文件: `Page01_Notice.jsx`
  - 功能: 40秒倒计时、复选框勾选、按钮启用

- [ ] **Page02_QuestionnaireNotice** - 问卷说明页
  - 文件: `Page02_QuestionnaireNotice.jsx`
  - 功能: 问卷说明、10分钟计时器启动

#### 探究任务页面 (13页)
- [ ] **Page02_Intro** - 情景引入页面
  - 文件: `Page02_Intro.jsx`
  - 功能: 40分钟任务计时器启动

- [ ] **Page03_Question** - 问题提出页面
  - 文件: `Page03_Question.jsx`
  - 功能: 文本输入验证（≥10字符）

- [ ] **Page04_Resource** - 资料阅读页面
  - 文件: `Page04_Resource.jsx`
  - 功能: 5个资料按钮、模态窗口、影响因素复选框

- [ ] **Page06_Hypothesis** - 假设陈述页面
  - 文件: `Page06_Hypothesis.jsx`
  - 功能: 天气图显示、假设阅读

- [ ] **Page07_Design** - 方案设计页面
  - 文件: `Page07_Design.jsx`
  - 功能: 3个实验想法输入（每个≥10字符）

- [ ] **Page08_Evaluation** - 方案评估页面
  - 文件: `Page08_Evaluation.jsx`
  - 功能: 3种方法评估、优缺点填写

- [ ] **Page09_Transition** - 过渡页面
  - 文件: `Page09_Transition.jsx`
  - 功能: 鼓励文字显示

- [ ] **Page10_Experiment** - 模拟实验页面
  - 文件: `Page10_Experiment.jsx`
  - 功能: 量筒选择、温度控制、小球下落动画、实验数据记录

- [ ] **Page11_Analysis1** - 数据分析1
  - 文件: `Page11_Analysis1.jsx`
  - 功能: 单选题、实验区可用

- [ ] **Page12_Analysis2** - 数据分析2
  - 文件: `Page12_Analysis2.jsx`
  - 功能: 单选题、实验区可用

- [ ] **Page13_Analysis3** - 数据分析3
  - 文件: `Page13_Analysis3.jsx`
  - 功能: 单选题、实验区可用

- [ ] **Page14_Solution** - 方案选择页面
  - 文件: `Page14_Solution.jsx`
  - 功能: 折线图、动态表格、理由输入

- [ ] **Page13_Summary** - 任务总结页面
  - 文件: `Page13_Summary.jsx`
  - 功能: 总结内容显示、跳转问卷按钮

#### 问卷页面 (8页)
- [ ] **Page15_Questionnaire1** - 问卷第1页 (Q1-Q5)
- [ ] **Page16_Questionnaire2** - 问卷第2页 (Q6-Q9)
- [ ] **Page17_Questionnaire3** - 问卷第3页 (Q10-Q12)
- [ ] **Page18_Questionnaire4** - 问卷第4页 (Q13-Q15)
- [ ] **Page19_Questionnaire5** - 问卷第5页 (Q16-Q18)
- [ ] **Page20_Questionnaire6** - 问卷第6页 (Q19-Q22)
- [ ] **Page21_Questionnaire7** - 问卷第7页 (Q23-Q25)
- [ ] **Page22_Questionnaire8** - 问卷第8页 (Q26-Q27)

#### 完成页面 (1页)
- [ ] **Page23_Completion** - 完成页面
  - 文件: `Page23_Completion.jsx`
  - 功能: 感谢提示、返回登录按钮

---

### 1.2 交互功能验证

#### 基础交互
- [ ] 注意事项复选框勾选正常
- [ ] 40秒倒计时自动启用按钮
- [ ] 文本输入验证（≥10字符）显示字符计数
- [ ] "下一页"按钮启用/禁用逻辑正确
- [ ] 所有按钮点击响应 <100ms

#### 高级交互
- [ ] 资料模态窗口打开/关闭流畅
- [ ] 影响因素复选框（至少1项）验证
- [ ] 量筒选择高亮状态正确
- [ ] 温度控制（5档）滑块操作流畅
- [ ] 小球下落动画流畅 (60 FPS)
- [ ] 实验数据自动记录到历史表格
- [ ] 折线图数据正确显示
- [ ] 动态表格增删行操作正常
- [ ] 问卷单选题选择和保存

---

### 1.3 计时器功能

#### 探究任务计时器 (40分钟)
- [ ] Page02_Intro 启动40分钟计时器
- [ ] 计时器显示格式: MM:SS
- [ ] 计时器倒计时准确
- [ ] 超时自动跳转到问卷说明页
- [ ] 计时器在页面刷新后恢复（如果实现了持久化）

#### 问卷计时器 (10分钟)
- [ ] Page02_QuestionnaireNotice 启动10分钟计时器
- [ ] 计时器显示格式: MM:SS
- [ ] 计时器倒计时准确
- [ ] 超时自动提交问卷并跳转完成页
- [ ] 计时器在页面刷新后恢复（如果实现了持久化）

#### 注意事项倒计时 (40秒)
- [ ] Page01_Notice 启动40秒倒计时
- [ ] 倒计时到0后自动启用按钮
- [ ] 倒计时显示正确

---

### 1.4 错误处理

#### 组件错误
- [ ] ErrorBoundary 捕获React组件错误
- [ ] 错误时显示友好提示页面
- [ ] 错误日志记录到控制台

#### API错误
- [ ] 401错误自动清除会话并跳转登录页
- [ ] 网络失败显示重试选项（3次重试）
- [ ] API超时处理正确
- [ ] 用户友好的错误提示消息

#### 验证错误
- [ ] 必填字段验证提示清晰
- [ ] 字符长度验证正确
- [ ] 选择项验证（至少1项）正确

---

## 2. 数据完整性检查

### 2.1 操作日志记录

#### 页面生命周期
- [ ] `page_enter` 事件在页面加载时记录
- [ ] `page_exit` 事件在页面离开前记录
- [ ] 时间戳格式正确 (ISO 8601: YYYY-MM-DDTHH:mm:ss.sssZ)
- [ ] 页面ID正确记录

#### 用户交互
- [ ] 按钮点击事件记录 (targetElement: 按钮ID, eventType: '点击')
- [ ] 文本输入事件记录 (targetElement: 输入框ID, eventType: '输入', value: 内容)
- [ ] 复选框选择记录 (targetElement: 复选框ID, eventType: '选择', value: 选中/取消)
- [ ] 单选题选择记录 (targetElement: 题目ID, eventType: '选择', value: 选项)
- [ ] 量筒选择记录
- [ ] 温度控制记录
- [ ] 实验启动/完成记录
- [ ] 模态窗口打开/关闭记录

---

### 2.2 答案收集

#### 文本答案
- [ ] 问题提出页 - 科学问题答案
- [ ] 方案设计页 - 3个实验想法答案
- [ ] 方案评估页 - 优缺点答案
- [ ] 方案选择页 - 理由答案

#### 选择答案
- [ ] 资料页面 - 影响因素选择
- [ ] 数据分析1-3 - 单选答案
- [ ] 问卷27题 - 所有单选答案

#### 实验数据
- [ ] 每次实验记录: 含水量、温度、下落时间
- [ ] 实验历史完整保存
- [ ] 方案选择页 - 温度/含水量组合表格

---

### 2.3 MarkObject 结构验证

#### 必需字段
- [ ] `pageNumber` - 字符串类型 (如 "1", "2", "3")
- [ ] `pageDesc` - 字符串描述 (如 "注意事项", "情景引入")
- [ ] `operationList` - 数组类型，包含所有操作记录
- [ ] `answerList` - 数组类型，包含所有答案
- [ ] `beginTime` - 字符串格式 "YYYY-MM-DD HH:mm:ss"
- [ ] `endTime` - 字符串格式 "YYYY-MM-DD HH:mm:ss"
- [ ] `imgList` - 数组类型（本模块为空数组）

#### 操作对象结构
```javascript
{
  targetElement: "按钮ID或元素ID",
  eventType: "点击|输入|选择|page_enter|page_exit",
  value: "操作值或页面ID",
  time: "ISO 8601 时间戳"
}
```

#### 答案对象结构
```javascript
{
  targetElement: "问题ID或答案ID",
  value: "答案内容"
}
```

---

### 2.4 数据提交验证

#### API 契约
- [ ] **Endpoint**: `POST /stu/saveHcMark`
- [ ] **Content-Type**: `multipart/form-data`
- [ ] **FormData 字段**:
  - [ ] `batchCode` - 字符串
  - [ ] `examNo` - 字符串
  - [ ] `mark` - JSON 字符串 (JSON.stringify(markObject))

#### 提交时机
- [ ] 每次页面导航前提交当前页数据
- [ ] 问卷提交按钮提交最后一页数据
- [ ] 不跳过任何页面的数据提交

#### 重试机制
- [ ] 失败后自动重试（最多3次）
- [ ] 每次重试间隔递增 (1s, 2s, 3s)
- [ ] 3次失败后显示错误提示
- [ ] 成功后清除操作日志和答案列表

#### 响应处理
- [ ] 200 响应: 成功，继续导航
- [ ] 401 响应: 未授权，跳转登录页
- [ ] 其他错误: 显示错误提示，允许重试

---

## 3. 代码质量检查

### 3.1 ESLint 检查

#### 运行命令
```bash
npm run lint
```

#### 预期结果
- [ ] Grade 7 Tracking 模块文件: **0 errors**
- [ ] 允许 **1个非关键warning** (Fast Refresh 相关)
- [ ] 无未使用变量
- [ ] 无 console.log 遗留（除非用于调试）
- [ ] 符合项目 ESLint 规则

#### 检查文件范围
```
src/modules/grade-7-tracking/**/*.{js,jsx}
```

---

### 3.2 代码组织

#### 模块结构
- [ ] 清晰的目录结构
  - `components/` - UI 组件
  - `pages/` - 页面组件
  - `context/` - 状态管理
  - `hooks/` - 自定义 Hooks
  - `utils/` - 工具函数
  - `config/` - 配置文件
  - `styles/` - CSS 模块

#### 组件设计
- [ ] 单一职责原则
- [ ] 可复用组件提取
- [ ] Props 验证 (PropTypes 或 TypeScript)
- [ ] 函数式组件优先
- [ ] 自定义 Hooks 正确使用

#### CSS Modules
- [ ] 所有样式使用 CSS Modules
- [ ] 无全局样式污染
- [ ] 样式文件命名规范: `*.module.css`
- [ ] 样式类名语义化

---

### 3.3 性能优化

#### Code Splitting
- [ ] React.lazy() 懒加载页面组件
- [ ] Suspense 包裹懒加载组件
- [ ] 加载状态显示 (Spinner/Skeleton)

#### 动画优化
- [ ] 使用 `transform` 和 `opacity` 属性
- [ ] GPU 加速 (`transform: translateZ(0)`)
- [ ] `will-change` 提示浏览器优化
- [ ] 避免 `layout thrashing`

#### 渲染优化
- [ ] React.memo 防止不必要的重渲染
- [ ] useCallback/useMemo 优化回调和计算
- [ ] 避免在 render 中创建新对象/数组

---

## 4. 性能指标检查

### 4.1 加载性能

#### 首屏加载
- [ ] **目标**: 首屏加载时间 < 2秒
- [ ] **实际**: _________
- [ ] **状态**: ✅ / ❌

#### 核心 Web Vitals
| 指标 | 目标 | 实际 | 状态 |
|------|------|------|------|
| 首次内容绘制 (FCP) | < 1.8s | _____ | ⬜ |
| 最大内容绘制 (LCP) | < 2.5s | _____ | ⬜ |
| 首次输入延迟 (FID) | < 100ms | _____ | ⬜ |
| 累积布局偏移 (CLS) | < 0.1 | _____ | ⬜ |

#### Bundle 大小
- [ ] **目标**: Gzip 后 < 100 KB
- [ ] **实际**: _________
- [ ] **状态**: ✅ / ❌

---

### 4.2 运行时性能

#### 交互响应
| 操作 | 目标 | 实际 | 状态 |
|------|------|------|------|
| 页面切换 | < 500ms | _____ | ⬜ |
| 按钮点击响应 | < 100ms | _____ | ⬜ |
| 表单验证 | < 50ms | _____ | ⬜ |
| 模态窗口打开 | < 200ms | _____ | ⬜ |

#### 动画性能
- [ ] **目标**: 小球下落动画 60 FPS
- [ ] **实际**: _________ FPS
- [ ] **状态**: ✅ / ❌
- [ ] 无明显卡顿或掉帧

---

### 4.3 数据传输

#### API 性能
| 指标 | 目标 | 实际 | 状态 |
|------|------|------|------|
| 数据提交成功率 | ≥ 99% | _____ | ⬜ |
| 平均响应时间 | < 500ms | _____ | ⬜ |
| 重试成功率 | ≥ 95% | _____ | ⬜ |

#### 网络容错
- [ ] 网络失败自动重试
- [ ] 重试逻辑正确（最多3次）
- [ ] 用户友好的错误提示
- [ ] 不丢失用户数据

---

## 5. 浏览器兼容性检查

### 5.1 主流浏览器

| 浏览器 | 版本 | 状态 | 备注 |
|--------|------|------|------|
| Chrome | 90+ | ⬜ | 推荐测试最新版本 |
| Firefox | 88+ | ⬜ | 推荐测试最新版本 |
| Edge | 90+ | ⬜ | 推荐测试最新版本 |
| Safari | 14+ | ⬜ | 如有条件测试 |

### 5.2 功能兼容性

#### 每个浏览器测试项
- [ ] 页面正常渲染
- [ ] CSS 样式正确应用
- [ ] JavaScript 功能正常
- [ ] 动画流畅运行
- [ ] 表单交互正常
- [ ] API 请求成功
- [ ] LocalStorage 读写正常

---

## 6. 响应式设计检查

### 6.1 分辨率测试

| 分辨率 | 状态 | 备注 |
|--------|------|------|
| 1280x720 | ⬜ | 所有内容可见，无滚动条 |
| 1366x768 | ⬜ | 布局合理，间距适中 |
| 1920x1080 | ⬜ | 充分利用空间，不浪费 |
| 2560x1440 | ⬜ | 高分辨率下显示正常 |

### 6.2 布局检查
- [ ] 无横向滚动条
- [ ] 内容居中对齐
- [ ] 间距和边距合理
- [ ] 字体大小适中
- [ ] 按钮和交互元素易点击

---

## 7. 文档完整性检查

### 7.1 技术文档

- [ ] **README.md** - 项目主文档
  - 项目介绍
  - 安装和运行说明
  - 技术栈说明
  - 目录结构说明

- [ ] **CLAUDE.md** - 开发指南
  - 模块系统说明
  - 开发规范
  - API 契约
  - 最佳实践

- [ ] **模块化开发规范与扩展指引.md**
  - 模块开发流程
  - 接口规范
  - 示例代码

### 7.2 测试文档

- [ ] **PHASE7_E2E_TEST_GUIDE.md** - E2E 测试指南
- [ ] **PHASE7_BROWSER_COMPATIBILITY_REPORT.md** - 浏览器兼容性报告
- [ ] **PHASE7_PERFORMANCE_BENCHMARK_REPORT.md** - 性能基准测试报告
- [ ] **PHASE7_BACKEND_INTEGRATION_GUIDE.md** - 后端联调指南

### 7.3 任务跟踪

- [ ] **tasks.md** - 任务列表和状态
  - 所有任务标记完成
  - 无遗留问题
  - 包含完成总结

### 7.4 API 文档

- [ ] **API 契约文档** (在 CLAUDE.md 或单独文件)
  - 登录接口说明
  - 数据提交接口说明
  - 请求/响应格式
  - 错误码说明

---

## 8. 模块注册验证

### 8.1 ModuleRegistry 注册

- [ ] 模块已在 `ModuleRegistry.js` 中注册
- [ ] `moduleId` 唯一且正确: `grade-7-tracking`
- [ ] `url` 正确: `/grade-7-tracking`
- [ ] `displayName` 正确: `7年级追踪测评`
- [ ] `version` 正确: `1.0.0`

### 8.2 模块接口实现

- [ ] `ModuleComponent` 导出正确
- [ ] `getInitialPage()` 函数正确实现
- [ ] `onInitialize()` 钩子实现（可选）
- [ ] `onDestroy()` 钩子实现（可选）

### 8.3 页面映射

- [ ] `pageMapping.js` 正确映射 pageNum → pageId
- [ ] 处理 null/undefined pageNum
- [ ] 处理无效 pageNum
- [ ] 返回默认首页

---

## 9. 会话恢复验证

### 9.1 LocalStorage 持久化

- [ ] 会话数据保存到 LocalStorage
  - `hci-batchCode`
  - `hci-examNo`
  - `hci-moduleUrl`
  - `hci-pageNum`
  - `hci-isAuthenticated`

### 9.2 页面刷新恢复

- [ ] 刷新页面后恢复到当前页
- [ ] 用户数据不丢失
- [ ] 计时器状态恢复（如果实现）
- [ ] 已填写答案恢复（如果实现）

---

## 10. 安全性检查

### 10.1 数据安全

- [ ] 不在控制台打印敏感信息（密码、token等）
- [ ] 不在 LocalStorage 存储敏感信息
- [ ] API 请求使用 HTTPS（生产环境）
- [ ] 会话超时正确处理

### 10.2 输入验证

- [ ] 所有用户输入进行验证
- [ ] 防止 XSS 攻击（React 默认转义）
- [ ] 防止注入攻击
- [ ] 字符长度限制

---

## 验收结论

### 测试统计

- **总计项目**: _________
- **通过项目**: _________
- **失败项目**: _________
- **通过率**: _________%

### 验收标准

- [ ] **功能完整性**: 100% 通过
- [ ] **数据完整性**: 100% 通过
- [ ] **代码质量**: ESLint 0 errors
- [ ] **性能指标**: 所有指标达标
- [ ] **浏览器兼容性**: 3大浏览器通过
- [ ] **文档完整性**: 所有文档齐全

### 最终评定

- [ ] ✅ **验收通过** - 所有项目100%通过，可以上线
- [ ] ⚠️ **条件通过** - 95%以上通过，非关键问题可延后修复
- [ ] ❌ **验收不通过** - 存在关键问题，需要修复后重新验收

---

**测试人员签名**: _________________
**日期**: 2025-10-15
**版本**: Phase 7 - Final Acceptance
