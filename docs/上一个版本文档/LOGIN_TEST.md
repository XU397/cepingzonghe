# 登录功能测试指南

## 功能概述

已成功实现登录页面和API对接功能，包括：

1. **登录页面组件** (`src/pages/LoginPage.jsx`)
   - 用户友好的登录界面
   - 账号/学号和密码输入框
   - 实时错误提示
   - 加载状态指示

2. **API服务** (`src/services/apiService.js`)
   - 真实的登录API调用
   - 密码公钥加密
   - 错误处理机制

3. **全局状态管理** (`src/context/AppContext.jsx`)
   - 认证状态管理
   - 用户信息存储
   - 持久化登录状态

4. **受保护路由** (`src/components/PageRouter.jsx`)
   - 自动重定向到登录页面
   - 认证状态检查

## 测试步骤

### 1. 启动应用
```bash
cd steamed-bun-task
npm run dev
```

### 2. 访问应用
打开浏览器访问 `http://localhost:5173`

### 3. 登录测试
应用会自动显示登录页面，包含：
- 项目标题："蒸馒头科学探究任务"
- 账号/学号输入框
- 密码输入框
- 登录按钮

### 4. API对接测试
- 输入测试账号和密码
- 点击登录按钮
- 系统会：
  1. 对密码进行公钥加密
  2. 发送POST请求到 `http://117.72.14.166:9002/stu/login`
  3. 处理服务器响应
  4. 成功后跳转到任务开始页面

### 5. 错误处理测试
- 测试空账号/密码的验证
- 测试网络错误的处理
- 测试服务器错误的显示

## 技术实现细节

### 密码加密
使用RSA公钥加密，公钥配置在 `src/utils/jsencrypt.ts`

### 请求格式
```json
{
  "accountPass": "用户账号",
  "accountPass": "加密后的密码",
  "type": 2
}
```

### 响应处理
成功响应格式：
```json
{
  "code": 200,
  "msg": "成功",
  "obj": {
    "batchCode": "250619",
    "examNo": "10015",
    "studentName": "学生姓名",
    "schoolName": "学校名称",
    // ... 其他用户信息
  }
}
```

### 状态持久化
- 登录状态保存在 localStorage
- 页面刷新后自动恢复登录状态
- 支持退出登录功能

## 注意事项

1. **网络环境**：确保能访问后端服务器 `http://117.72.14.166:9002`
2. **CORS设置**：如遇跨域问题，需要后端配置CORS
3. **测试账号**：需要有效的测试账号进行功能验证

## 下一步开发

登录功能已完成，可以继续进行：
1. 其他页面的开发和测试
2. 数据提交功能的完善
3. 用户体验的优化 