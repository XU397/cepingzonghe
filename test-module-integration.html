<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¨¡å—é›†æˆéªŒè¯ - æµ‹è¯•é¡µé¢</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #4CAF50;
            padding-bottom: 10px;
        }
        .test-section {
            background: white;
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-item {
            margin: 15px 0;
            padding: 15px;
            border-left: 4px solid #2196F3;
            background: #f9f9f9;
        }
        .test-item h3 {
            margin-top: 0;
            color: #2196F3;
        }
        .status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 4px;
            font-weight: bold;
            margin-left: 10px;
        }
        .status.pending { background: #FFC107; color: #000; }
        .status.pass { background: #4CAF50; color: white; }
        .status.fail { background: #f44336; color: white; }
        .code-block {
            background: #272822;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        .btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        .btn:hover {
            background: #45a049;
        }
        .btn-secondary {
            background: #2196F3;
        }
        .btn-secondary:hover {
            background: #0b7dda;
        }
        iframe {
            width: 100%;
            height: 600px;
            border: 2px solid #ddd;
            border-radius: 4px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>ğŸ”§ æ¨¡å—ç»Ÿä¸€å¹³å°é›†æˆ - æµè§ˆå™¨éªŒè¯</h1>

    <div class="test-section">
        <h2>ğŸ“‹ éªŒè¯æ¸…å•æ¦‚è§ˆ</h2>
        <p><strong>ææ¡ˆID</strong>: update-module-integration-to-unified-platform</p>
        <p><strong>éªŒè¯æ—¶é—´</strong>: <span id="verify-time"></span></p>
        <p><strong>å¼€å‘æœåŠ¡å™¨</strong>: <a href="http://localhost:3000" target="_blank">http://localhost:3000</a></p>
    </div>

    <div class="test-section">
        <h2>ğŸ¯ A. Grade-7 æ¨¡å—éªŒè¯ (é«˜ä¼˜å…ˆçº§)</h2>

        <div class="test-item">
            <h3>A1. ç™»å½•ä¸æ¨¡å—åŠ è½½ <span class="status pending">å¾…éªŒè¯</span></h3>
            <p><strong>éªŒè¯æ­¥éª¤</strong>:</p>
            <ol>
                <li>ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æ‰“å¼€åº”ç”¨</li>
                <li>åœ¨å¼€å‘è€…å·¥å…· Console ä¸­æŸ¥çœ‹æ—¥å¿—</li>
                <li>æŸ¥æ‰¾: <code>[Grade7Wrapper] ğŸ¯ 7å¹´çº§æ¨¡å—åŒ…è£…å™¨å·²æŒ‚è½½</code></li>
                <li>æŸ¥æ‰¾: <code>[AssessmentPageFrame] é¡µé¢æ¡†æ¶åˆå§‹åŒ–</code></li>
            </ol>
            <button class="btn" onclick="openApp()">æ‰“å¼€åº”ç”¨ (æ–°æ ‡ç­¾é¡µ)</button>
            <button class="btn btn-secondary" onclick="showInFrame()">åœ¨ä¸‹æ–¹æ¡†æ¶ä¸­æ˜¾ç¤º</button>
        </div>

        <div class="test-item">
            <h3>A2. ç»Ÿä¸€é¡µé¢æ¡†æ¶å¸ƒå±€ <span class="status pending">å¾…éªŒè¯</span></h3>
            <p><strong>æ£€æŸ¥è¦ç‚¹</strong>:</p>
            <ul>
                <li>âœ“ å·¦ä¾§å¯¼èˆªæ  (LeftStepperNav) æ˜¾ç¤ºæ­£å¸¸</li>
                <li>âœ“ åœ†ç‚¹æ ·å¼æ­£ç¡® (å½“å‰é«˜äº®è“è‰²ã€å·²å®Œæˆç»¿è‰²ã€æœªå®Œæˆç°è‰²)</li>
                <li>âœ“ æ­¥éª¤æŒ‡ç¤ºå™¨æ˜¾ç¤º (å¦‚ "5/12")</li>
                <li>âœ“ é¡¶éƒ¨è®¡æ—¶å™¨ (TimerDisplay) æ­£å¸¸å€’è®¡æ—¶</li>
                <li>âœ“ å¯¼èˆªä¸å¯ç‚¹å‡» (åªè¯»æ¨¡å¼)</li>
            </ul>
            <div class="code-block">
// åœ¨ Console ä¸­æ£€æŸ¥ DOM ç»“æ„
document.querySelector('[data-nav-mode]')?.dataset.navMode
// åº”è¿”å›: "experiment" æˆ– "questionnaire"

document.querySelector('.timer-display')?.textContent
// åº”è¿”å›: å€’è®¡æ—¶æ—¶é—´ (å¦‚ "38:25")
            </div>
        </div>

        <div class="test-item">
            <h3>A3. å®éªŒ/é—®å·æ¨¡å¼åˆ‡æ¢ <span class="status pending">å¾…éªŒè¯</span></h3>
            <p><strong>éªŒè¯æ­¥éª¤</strong>:</p>
            <ol>
                <li>å®Œæˆå®éªŒéƒ¨åˆ†,è¿›å…¥é—®å·é¡µé¢</li>
                <li>è§‚å¯Ÿå·¦ä¾§å¯¼èˆªæ˜¯å¦è‡ªåŠ¨åˆ‡æ¢</li>
                <li>è§‚å¯Ÿè®¡æ—¶å™¨æ˜¯å¦é‡ç½®ä¸º 10 åˆ†é’Ÿ</li>
            </ol>
            <div class="code-block">
// æ£€æŸ¥å¯¼èˆªæ¨¡å¼
document.querySelector('[data-nav-mode]')?.dataset.navMode

// æ£€æŸ¥è®¡æ—¶å™¨ä½œç”¨åŸŸ (åœ¨ localStorage ä¸­)
Object.keys(localStorage).filter(k => k.includes('timer'))
            </div>
        </div>

        <div class="test-item">
            <h3>A4. è·¨åˆ·æ–°æ¢å¤ <span class="status pending">å¾…éªŒè¯</span></h3>
            <p><strong>éªŒè¯æ­¥éª¤</strong>:</p>
            <ol>
                <li>è¿›å…¥ä»»æ„é¡µé¢ (å¦‚ç¬¬ 5 é¡µ)</li>
                <li>ç­‰å¾…è®¡æ—¶å™¨èµ°åˆ°æŸä¸ªæ—¶é—´ (å¦‚ 38:00)</li>
                <li>æŒ‰ F5 åˆ·æ–°é¡µé¢</li>
                <li>æ£€æŸ¥: é¡µé¢æ˜¯å¦ä»åœ¨ç¬¬ 5 é¡µ</li>
                <li>æ£€æŸ¥: è®¡æ—¶å™¨æ˜¯å¦ä» 38:00 ç»§ç»­å€’è®¡æ—¶</li>
            </ol>
            <div class="code-block">
// æ£€æŸ¥ localStorage ä¸­çš„é¡µé¢ä½ç½®
localStorage.getItem('hci-pageNum')

// æ£€æŸ¥è®¡æ—¶å™¨çŠ¶æ€
Object.keys(localStorage)
    .filter(k => k.startsWith('timer:'))
    .map(k => ({key: k, value: localStorage.getItem(k)}))
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸŸ¡ B. Grade-4 æ¨¡å—éªŒè¯ (ä¸­ä¼˜å…ˆçº§)</h2>

        <div class="test-item">
            <h3>B1. æ—§ç‰ˆå¸ƒå±€ (é»˜è®¤) <span class="status pending">å¾…éªŒè¯</span></h3>
            <p><strong>ç¯å¢ƒé…ç½®</strong>:</p>
            <div class="code-block">
# .env.local æ–‡ä»¶
# ä¸è®¾ç½® VITE_USE_UNIFIED_FRAME (æˆ–è®¾ç½®ä¸º false)
            </div>
            <p><strong>é¢„æœŸè¡Œä¸º</strong>: ä½¿ç”¨æ—§ç‰ˆ LeftNavigation ç»„ä»¶</p>
        </div>

        <div class="test-item">
            <h3>B2. æ–°ç‰ˆå¸ƒå±€ (å¯é€‰) <span class="status pending">å¾…éªŒè¯</span></h3>
            <p><strong>ç¯å¢ƒé…ç½®</strong>:</p>
            <div class="code-block">
# .env.local æ–‡ä»¶
VITE_USE_UNIFIED_FRAME=true

# é‡å¯å¼€å‘æœåŠ¡å™¨
npm run dev
            </div>
            <p><strong>é¢„æœŸè¡Œä¸º</strong>: ScenarioIntroPage ä½¿ç”¨ AssessmentPageFrame</p>
            <button class="btn btn-secondary" onclick="checkEnvVar()">æ£€æŸ¥ç¯å¢ƒå˜é‡</button>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸŸ¢ C. Grade-7-Tracking æ¨¡å—éªŒè¯ (ä½ä¼˜å…ˆçº§)</h2>

        <div class="test-item">
            <h3>C1. useDataLogger å§”æ‰˜éªŒè¯ <span class="status pending">å¾…éªŒè¯</span></h3>
            <p><strong>Console æ—¥å¿—æ£€æŸ¥</strong>:</p>
            <ul>
                <li>æŸ¥æ‰¾: <code>[useDataLogger] æäº¤æ•°æ®</code></li>
                <li>æŸ¥æ‰¾: <code>[usePageSubmission] æäº¤æˆåŠŸ</code></li>
            </ul>
        </div>

        <div class="test-item">
            <h3>C2. TimerService é›†æˆéªŒè¯ <span class="status pending">å¾…éªŒè¯</span></h3>
            <p><strong>éªŒè¯ç‚¹</strong>:</p>
            <ul>
                <li>å®éªŒè®¡æ—¶å™¨æ­£å¸¸å¯åŠ¨</li>
                <li>é—®å·è®¡æ—¶å™¨æ­£å¸¸å¯åŠ¨</li>
                <li>è·¨åˆ·æ–°æ¢å¤æ­£å¸¸</li>
            </ul>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ“Š éªŒè¯ç»“æœè®°å½•</h2>
        <div id="results">
            <p>åœ¨æµè§ˆå™¨ Console ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤è®°å½•éªŒè¯ç»“æœ:</p>
            <div class="code-block">
// è®°å½•éªŒè¯ç»“æœ
const results = {
    grade7_layout: 'pass', // pass | fail | pending
    grade7_timer: 'pass',
    grade7_navigation: 'pass',
    grade7_refresh: 'pass',
    grade4_legacy: 'pending',
    grade4_unified: 'pending',
    g7tracking_submit: 'pending',
    g7tracking_timer: 'pending',
    timestamp: new Date().toISOString(),
    notes: 'åœ¨æ­¤è®°å½•é—®é¢˜'
};

console.log('éªŒè¯ç»“æœ:', JSON.stringify(results, null, 2));
localStorage.setItem('verification-results', JSON.stringify(results));
            </div>
        </div>
    </div>

    <div class="test-section" id="iframe-container" style="display: none;">
        <h2>ğŸ“± åº”ç”¨é¢„è§ˆ</h2>
        <iframe id="app-frame" src=""></iframe>
    </div>

    <div class="test-section">
        <h2>ğŸ”— å¿«é€Ÿé“¾æ¥</h2>
        <button class="btn" onclick="window.open('http://localhost:3000', '_blank')">æ‰“å¼€åº”ç”¨</button>
        <button class="btn btn-secondary" onclick="window.open('/openspec/changes/update-module-integration-to-unified-platform/BROWSER_VERIFICATION_CHECKLIST.md', '_blank')">æŸ¥çœ‹å®Œæ•´æ¸…å•</button>
        <button class="btn btn-secondary" onclick="window.open('/openspec/changes/update-module-integration-to-unified-platform/IMPLEMENTATION_SUMMARY.md', '_blank')">æŸ¥çœ‹å®æ–½æ€»ç»“</button>
    </div>

    <script>
        // æ˜¾ç¤ºå½“å‰æ—¶é—´
        document.getElementById('verify-time').textContent = new Date().toLocaleString('zh-CN');

        function openApp() {
            window.open('http://localhost:3000', '_blank');
        }

        function showInFrame() {
            const container = document.getElementById('iframe-container');
            const frame = document.getElementById('app-frame');
            frame.src = 'http://localhost:3000';
            container.style.display = 'block';
            container.scrollIntoView({ behavior: 'smooth' });
        }

        function checkEnvVar() {
            fetch('http://localhost:3000')
                .then(() => {
                    alert('è¯·åœ¨å¼€å‘æœåŠ¡å™¨çš„ Console ä¸­æ£€æŸ¥:\\n\\nimport.meta.env.VITE_USE_UNIFIED_FRAME');
                })
                .catch(e => {
                    alert('æ— æ³•è¿æ¥åˆ°å¼€å‘æœåŠ¡å™¨ã€‚è¯·ç¡®ä¿ npm run dev æ­£åœ¨è¿è¡Œã€‚');
                });
        }

        // è‡ªåŠ¨æ£€æŸ¥ localStorage ä¸­çš„éªŒè¯ç»“æœ
        window.addEventListener('load', () => {
            const saved = localStorage.getItem('verification-results');
            if (saved) {
                console.log('å·²ä¿å­˜çš„éªŒè¯ç»“æœ:', JSON.parse(saved));
            }
        });
    </script>
</body>
</html>
