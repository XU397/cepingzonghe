# Feature Specification: 光伏治沙交互实验子模块

**Feature Branch**: `003-c-users-lh`  
**Created**: 2025-11-19  
**Status**: Draft  
**Input**: User description: "我们现在要根据项目规范要求，新增一个交互实验的子模块，模块名称是光伏治沙，这个子模块的详细需求见文档C:\Users\LH\Desktop\cepingzonghe\docs\Task C\光伏治沙子模块设计说明书.md"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 完成实验前置引导流程 (Priority: P1)

学生进入光伏治沙实验模块后，需要阅读注意事项、了解任务背景，为后续实验做好准备。

**Why this priority**: 这是实验的基础准备流程，确保学生理解实验目标和操作要求，是整个交互实验的前提条件。

**Independent Test**: 可以独立测试引导页面的显示、倒计时功能和确认机制，验证学生能够正确理解实验要求并进入实验阶段。

**Acceptance Scenarios**:

1. **Given** 学生登录进入光伏治沙模块，**When** 学生阅读注意事项页面，**Then** 系统显示38秒倒计时，倒计时结束后可勾选确认框
2. **Given** 学生完成注意事项确认，**When** 学生进入任务封面和背景引入页面，**Then** 系统显示光伏治沙背景信息和5秒阅读倒计时

---

### User Story 2 - 设计并执行光伏治沙实验 (Priority: P2)

学生需要根据背景信息设计实验方案，通过SVG仿真界面操作实验，观察光伏板对风速的影响。

**Why this priority**: 这是核心实验操作环节，通过交互式仿真让学生直观理解物理原理，培养实验操作能力。

**Independent Test**: 可以独立测试实验设计输入、SVG动画交互、风速数据收集和显示功能，验证实验仿真的完整性和准确性。

**Acceptance Scenarios**:

1. **Given** 学生进入实验设计页面，**When** 学生输入实验方案（至少5个字符），**Then** 系统记录答案并允许进入下一步
2. **Given** 学生进入实验操作页面，**When** 学生调节高度参数（20/50/100cm）并启动实验，**Then** 系统显示对应的风速仪动画和预定义的风速数值

---

### User Story 3 - 数据分析与结论总结 (Priority: P3)

学生完成实验数据收集后，需要分析不同高度下光伏板对风速的影响，得出科学结论。

**Why this priority**: 这是实验的分析总结环节，培养学生的数据分析能力和科学思维，完成整个学习闭环。

**Independent Test**: 可以独立测试数据可视化组件、问答交互和结论提交功能，验证学生能够正确分析实验结果。

**Acceptance Scenarios**:

1. **Given** 学生收集完所有实验数据，**When** 学生查看折线图和数据对比，**Then** 系统显示清晰的图表标注和数值对比
2. **Given** 学生完成结论分析问答，**When** 学生提交最终答案，**Then** 系统记录所有实验过程和答案数据

---

### Edge Cases

- 当SVG动画组件加载失败时，系统降级到静态数值显示，确保实验数据仍能正常获取
- 当网络连接中断导致数据提交失败时，系统启用重试机制（最多3次）并保持答案草稿
- 当计时器到期时，系统自动提交当前页面数据并标记未完成项为"超时未回答"
- 当用户刷新页面时，系统从本地存储恢复答案和实验进度，继续从中断的页面开始

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 系统必须支持8个页面的线性导航流程，包括3个引导页面（hidden模式）和5个实验页面（experiment模式）
- **FR-002**: 系统必须实现38秒注意事项倒计时和5秒背景阅读倒计时功能
- **FR-003**: 系统必须提供SVG风速仪动画，支持3个高度参数（20cm、50cm、100cm）的实验仿真
- **FR-004**: 系统必须使用预定义的风速数据常量（WIND_SPEED_DATA），确保实验结果的一致性和准确性
- **FR-005**: 系统必须支持实验方案文本输入验证（最少5个字符）和多选题答题功能
- **FR-006**: 系统必须实现数据可视化组件，显示风速对比的折线图和数值标注
- **FR-007**: 系统必须记录所有用户交互操作（page_enter、page_exit、click、change等）到operationList
- **FR-008**: 系统必须支持20分钟任务计时，计时到期时自动提交并强制结束模块
- **FR-009**: 系统必须实现答案草稿的本地存储和页面刷新后的状态恢复
- **FR-010**: 系统必须使用统一的MarkObject格式提交数据，包含pageNumber、pageDesc、operationList和answerList字段

### Key Entities *(include if feature involves data)*

- **WindSpeedData**: 实验风速数据常量，包含3个高度级别（20/50/100cm）及对应的有板区和无板区风速值
- **ExperimentState**: 实验状态数据，记录当前高度设置、动画状态、收集的风速数值等
- **AnswerDraft**: 答案草稿数据，保存用户在各页面的输入内容，支持页面刷新恢复
- **OperationLog**: 用户操作记录，包含事件类型、目标元素、操作值和时间戳等字段

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 学生能够在20分钟内完成完整的光伏治沙实验流程，从注意事项阅读到结论分析提交
- **SC-002**: 系统支持在1280×800分辨率下正常显示和交互，SVG动画保持60FPS流畅度
- **SC-003**: 实验数据的准确性达到100%（使用预定义常量，无随机误差）
- **SC-004**: 页面切换响应时间控制在300ms以内，提升用户交互体验
- **SC-005**: 数据提交成功率达到99%以上，网络异常时重试机制有效
- **SC-006**: 90%以上的学生能够正确理解和操作实验界面，完成所有实验任务
- **SC-007**: 页面刷新后状态恢复准确率达到100%，答案和实验进度不丢失
